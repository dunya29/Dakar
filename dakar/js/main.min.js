const fixedBlocks=document.querySelectorAll(".fixed-block"),overlay=document.querySelector(".overlay"),header=document.querySelector(".header"),modalShowBtn=document.querySelectorAll(".modal-show"),modal=document.querySelectorAll(".modal"),feedbackModal=document.querySelector(".feedback-modal"),successModal=document.querySelector(".success-modal"),errorModal=document.querySelector(".error-modal"),desktopHeader=document.querySelector(".desktop-header"),mobHeader=document.querySelector(".mob-header");let animSpd=400;function sprite(e){return'<svg><use xlink:href="img/icons/sprite.svg#'+e+'"></use></svg>'}function enableScroll(){fixedBlocks&&fixedBlocks.forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll")}function disableScroll(){paddingValue=window.innerWidth>325?window.innerWidth-document.documentElement.clientWidth+"px":0,fixedBlocks&&fixedBlocks.forEach((e=>e.style.paddingRight=paddingValue)),document.body.style.paddingRight=paddingValue,document.body.classList.add("no-scroll")}function smoothDrop(e,t){if(e.classList.contains("active"))t.style.height="0px";else{t.style.height="auto";let e=t.clientHeight+1+"px";t.style.height="0px",setTimeout((function(){t.style.height=e}),0)}e.classList.toggle("active")}function tabSwitch(e,t){e.forEach(((r,o)=>{r.addEventListener("click",(()=>{r.getAttribute("data-nav");e.forEach((e=>{e.classList.remove("active")})),t.forEach((e=>{e.classList.remove("active")})),r.classList.add("active"),t[o].classList.add("active"),r.style.opacity="0",t[o].style.opacity="0",setTimeout((()=>{r.style.opacity="1",t[o].style.opacity="1"}),0)}))}))}function formSuccess(e){e.querySelectorAll(".item-form").forEach((e=>e.classList.remove("error"))),e.querySelectorAll("input").forEach((e=>{["hidden","checkbox","radio"].includes(e.type)||(e.value=""),["checkbox","radio"].includes(e.type)&&!e.classList.contains("required")&&(e.checked=!1)})),e.querySelector("textarea")&&(e.querySelector("textarea").value=""),e.querySelector(".file-form__item")&&(e.querySelector(".file-form__items").innerHTML="");let t=document.querySelector(".modal.open");t&&t.classList.remove("open"),openModal(successModal)}function openModal(e){mobHeader.classList.contains("show")||disableScroll(),e.classList.add("open")}function closeModal(e){e.classList.remove("open"),setTimeout((()=>{mobHeader.classList.contains("show")||enableScroll()}),animSpd)}modal.forEach((e=>{e.addEventListener("click",(t=>{e.querySelector(".modal__content").contains(t.target)&&!e.querySelector(".modal__close").contains(t.target)||closeModal(e)}))})),modalShowBtn.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let r=e.getAttribute("data-modal");openModal(document.getElementById(r))}))})),desktopHeader.querySelectorAll(".menu__item").forEach((e=>{e.querySelector(".menu__subnavs")&&(e.addEventListener("mouseenter",(()=>{window.innerWidth>1260.98&&(e.querySelector(".menu__subnavs").style.paddingTop=header.scrollHeight+"px",disableScroll(),overlay.classList.add("show"))})),e.addEventListener("mouseleave",(()=>{window.innerWidth>1260.98&&(enableScroll(),overlay.classList.remove("show"))})))})),desktopHeader.querySelector(".icon-menu").addEventListener("click",(()=>{window.scrollTo(0,0),overlay.classList.add("show"),mobHeader.classList.add("show"),disableScroll()})),mobHeader.querySelector(".icon-menu").addEventListener("click",(()=>{mobHeader.classList.remove("show"),overlay.classList.remove("show"),enableScroll(),$(mobHeader).find(".menu__item").each((function(){$(this).removeClass("active").find(".menu__subnavs").slideUp()})),mobHeader.querySelectorAll(".menu__subnavs").forEach((e=>{e.querySelector(".stroke-btn").textContent="Посмотреть всё",e.classList.remove("showAll")}))})),window.addEventListener("resize",(()=>{window.innerWidth>1260.98&&mobHeader.classList.contains("show")&&mobHeader.querySelector(".icon-menu").click()})),mobHeader.querySelectorAll(".menu__link").forEach((e=>{e.addEventListener("click",(t=>{e.parentNode.querySelector(".menu__subnavs")&&(t.preventDefault(),e.parentNode.classList.contains("active")?$(e).parents(".menu__item").removeClass("active").find(".menu__subnavs").slideUp():($(e).parents(".menu__item").addClass("active").find(".menu__subnavs").slideDown(),$(e).parents(".menu__item").siblings(".menu__item").removeClass("active").find(".menu__subnavs").slideUp()))}))})),mobHeader.querySelectorAll(".menu__subnavs").forEach((e=>{const t=e.querySelector(".stroke-btn");e.querySelectorAll("li").length>12&&(t.style.display="flex",t.addEventListener("click",(()=>{e.classList.contains("showAll")?(t.textContent="Посмотреть всё",e.classList.remove("showAll")):(t.textContent="Скрыть всё",e.classList.add("showAll"))})))}));let fileTypes=["image/png","image/jpeg","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];document.querySelectorAll(".file-form").forEach((e=>{e.querySelector("input").addEventListener("change",(t=>{let r=t.target.files;for(let t=0;t<r.length;t++){let o=r[t];o.size>10485760?(e.querySelector("input").value="",e.classList.add("error"),e.querySelector(".file-form__items").innerHTML="",e.querySelector("[data-error]").textContent="Файл должен быть менее 10 МБ"):fileTypes.includes(o.type)?(e.classList.remove("error"),e.querySelector("[data-error]").textContent="",e.querySelector(".file-form__items").innerHTML=`<div class="file-form__item">\n        <span class="file-form__name">${o.name} ${(o.size/1024).toFixed(2)}KB</span>\n        <span class="file-form__del">${sprite("del")}</span>\n        </div>\n    `):(e.querySelector("input").value="",e.classList.add("error"),e.querySelector(".file-form__items").innerHTML="",e.querySelector("[data-error]").textContent="Разрешённые форматы: doc, docx, pdf, xls, xlsx, jpg, png")}})),e.addEventListener("click",(t=>{const r=e.querySelector(".file-form__del");r&&r.contains(t.target)&&(e.querySelector("input").value="",setTimeout((()=>{e.querySelector(".file-form__items").innerHTML=""}),0))}))}));const switchBlock=document.querySelectorAll(".switch-block");switchBlock&&switchBlock.forEach((e=>{tabSwitch(e.querySelectorAll("[data-nav]"),e.querySelectorAll("[data-block]"))}));const inp=document.querySelectorAll("input[type=tel]");inp&&inp.forEach((e=>{Inputmask({mask:"+7 999 999-99-99"}).mask(e)}));const swiper4=document.querySelectorAll(".swiper-grid-4");swiper4&&swiper4.forEach((e=>{new Swiper(e,{slidesPerView:1.4,spaceBetween:8,observer:!0,observeParents:!0,watchSlidesProgress:!0,breakpoints:{1260.98:{slidesPerView:4,spaceBetween:24},991.98:{slidesPerView:4,spaceBetween:16},767.98:{slidesPerView:3,spaceBetween:16},479.98:{slidesPerView:2,spaceBetween:16},374.98:{slidesPerView:2,spaceBetween:8}},navigation:{prevEl:e.parentNode.querySelector(".swiper-btn.prev"),nextEl:e.parentNode.querySelector(".swiper-btn.next")},speed:800})}));const swiper3=document.querySelectorAll(".swiper-grid-3");swiper3&&swiper3.forEach((e=>{new Swiper(e,{slidesPerView:2,spaceBetween:8,observer:!0,observeParents:!0,watchSlidesProgress:!0,breakpoints:{1260.98:{slidesPerView:3,spaceBetween:24},991.98:{slidesPerView:3,spaceBetween:16},575.98:{slidesPerView:3,spaceBetween:16},479.98:{slidesPerView:3,spaceBetween:16}},navigation:{prevEl:e.parentNode.querySelector(".swiper-btn.prev"),nextEl:e.parentNode.querySelector(".swiper-btn.next")},speed:800})}));const swiper2=document.querySelectorAll(".swiper-grid-2");swiper2&&swiper2.forEach((e=>{new Swiper(e,{slidesPerView:1,spaceBetween:8,observer:!0,observeParents:!0,watchSlidesProgress:!0,breakpoints:{1260.98:{slidesPerView:2,spaceBetween:24},991.98:{slidesPerView:2,spaceBetween:16},767.98:{slidesPerView:1.5,spaceBetween:16},479.98:{slidesPerView:1.2,spaceBetween:16}},navigation:{prevEl:e.parentNode.querySelector(".swiper-btn.prev"),nextEl:e.parentNode.querySelector(".swiper-btn.next")},speed:800})}));const intro=document.querySelector(".intro");if(intro){new Swiper(intro.querySelector(".swiper"),{slidesPerView:1,spaceBetween:16,observer:!0,observeParents:!0,effect:"fade",breakpoints:{1260.98:{spaceBetween:24}},navigation:{prevEl:intro.querySelector(".swiper-btn.prev"),nextEl:intro.querySelector(".swiper-btn.next")},pagination:{el:intro.querySelector(".swiper-pagination"),clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},speed:500})}const accHeader=document.querySelectorAll(".accordion__header"),accBody=document.querySelectorAll(".accordion__body");accHeader&&accBody&&(accHeader.forEach(((e,t)=>{e.addEventListener("click",(()=>{accHeader.forEach((t=>{!e.classList.contains("active")&&t.classList.contains("active")&&t.click()})),smoothDrop(accHeader[t],accBody[t])}))})),window.addEventListener("resize",(()=>{accHeader.forEach(((e,t)=>{e.classList.contains("active")&&(accBody[t].style.height="auto",accBody[t].style.height=accBody[t].scrollHeight+"px")}))})));let productThumbSwiper,productSwiperMob,productSwiperDesk,productSwiperMobInit=!1,productSwiperDeskInit=!1;if(document.querySelector(".product")){function productSwiperInit(){window.innerWidth<=991?(productSwiperDeskInit&&(productSwiperDesk.destroy(),productThumbSwiper.destroy(),productSwiperDeskInit=!1),productSwiperMobInit||(productSwiperMob=new Swiper(".product__mainswiper",{slidesPerView:1,observer:!0,observeParents:!0,spaceBetween:8,autoplay:{delay:5e3,pauseOnMouseEnter:!0,disableOnInteraction:!1},breakpoints:{767.98:{slidesPerView:1.3,spaceBetween:16},479.98:{slidesPerView:1.1,spaceBetween:16}},speed:800}),productSwiperMobInit=!0)):(productSwiperMobInit&&(productSwiperMob.destroy(),productSwiperMobInit=!1),productSwiperDeskInit||(productThumbSwiper=new Swiper(".product__thumbswiper",{slidesPerView:4,observer:!0,observeParents:!0,watchSlidesProgress:!0,spaceBetween:16,breakpoints:{1260.98:{spaceBetween:24}}}),productSwiperDesk=new Swiper(".product__mainswiper",{slidesPerView:1,observer:!0,observeParents:!0,effect:"fade",thumbs:{swiper:productThumbSwiper},speed:500}),productSwiperDeskInit=!0))}productSwiperInit(),window.addEventListener("resize",productSwiperInit)}function worksSlider(){document.querySelectorAll(".works .item-work").forEach((e=>{const t=e.querySelectorAll(".item-work__img");for(let r=0;r<t.length;r++){let t=document.createElement("span"),r=document.createElement("span");e.querySelector(".item-work__hovers").append(t),e.querySelector(".item-work__controls").append(r)}function r(r,o){let i=e.querySelector(".item-work__hovers").getBoundingClientRect().left,n=r.clientWidth,c=Math.ceil((o-i)/n);c>=1&&c<=t.length?s(c):s(1)}function o(){s(1)}function s(t){e.querySelectorAll(".item-work__img").forEach((e=>e.style.opacity=0)),e.querySelectorAll(".item-work__img")[t-1].style.opacity=1,e.querySelectorAll(".item-work__controls span").forEach((e=>e.style.backgroundColor="#ffffff")),e.querySelectorAll(".item-work__controls span")[t-1].style.backgroundColor="#2667FF"}e.querySelectorAll(".item-work__hovers span").forEach(((t,s)=>{t.addEventListener("click",(()=>{e.querySelectorAll(".item-work__img")[s].click()})),t.addEventListener("touchmove",(e=>{r(t,e.touches[0].clientX)})),t.addEventListener("touchend",(()=>o())),t.addEventListener("mousemove",(e=>{r(t,e.clientX)})),t.addEventListener("mouseleave",(()=>o()))}))}))}document.querySelector(".works .item-work")&&worksSlider(),document.addEventListener("click",(e=>{document.querySelectorAll("[data-fancy]").forEach((t=>{if(t.contains(e.target)){let r=[],o=t.getAttribute("data-fit")?t.getAttribute("data-fit"):"",s=t.getAttribute("data-fancy"),i=t.hasAttribute("data-thumb"),n=t.hasAttribute("data-txt");document.querySelectorAll("[data-fancy]").forEach((e=>{e.closest(".swiper-slide-duplicate")||e.getAttribute("data-fancy")!==s||r.push(e.getAttribute("data-src"))}));let c=r.indexOf(t.getAttribute("data-src"));document.querySelector(".footer").insertAdjacentHTML("afterend",`\n        <div class="fancy-modal">\n          <div class="custom-scroll fancy-modal__inner">\n            <div class="container">\n                <div class="mb-60 fancy-modal__top">\n                ${n?`<h4>${t.getAttribute("data-txt")}</h4>`:""}\n                  <button class="btn fancy-modal__close" aria-label="Закрыть всплывающее окно"></button>\n                </div>\n                <div class="fancy-modal__content">\n                  <div class="swiper mainswiper">\n                    <div class="swiper-wrapper">\n                       ${r.map((e=>`<div class="swiper-slide">\n                             <div class="swiper-img ${o}">\n                                 <img src=${e} alt="">\n                             </div>\n                         </div>`)).join("")}\n                    </div>\n                  </div>\n                  ${i?`<div class="swiper thumbswiper">\n                  <div class="swiper-wrapper grid-container">\n                    ${r.map((e=>`<a class="swiper-slide">\n                       <div class="swiper-img cover">\n                           <img src=${e} alt="">\n                       </div>\n                   </a>`)).join("")}\n                 </div>\n                </div>`:""}\n                </div>\n            </div>\n          </div>\n        </div>\n       `);let l=new Swiper(".fancy-modal .thumbswiper",{slidesPerView:4,spaceBetween:8,direction:"horizontal",observer:!0,observeParents:!0,watchSlidesProgress:!0,initialSlide:c,grid:{rows:1,fill:"column"},breakpoints:{1260.98:{slidesPerView:4,spaceBetween:24,direction:"vertical",grid:{rows:2,fill:"column"}},767.98:{slidesPerView:4,spaceBetween:16,direction:"vertical",grid:{rows:2,fill:"column"}},479.98:{slidesPerView:5,spaceBetween:16,direction:"horizontal",grid:{rows:1,fill:"column"}}}});new Swiper(".fancy-modal .mainswiper",{slidesPerView:1,slidesPerGroup:1,observer:!0,observeParents:!0,initialSlide:c,effect:"fade",thumbs:{swiper:i?l:null},speed:500});const a=document.querySelector(".fancy-modal");document.querySelector(".reviews")&&document.querySelector(".reviews").contains(e.target)&&a.classList.add("fancy-modal--reviews"),openModal(a),a.querySelector(".fancy-modal__close").addEventListener("click",(e=>{closeModal(a),setTimeout((()=>{a.remove()}),animSpd)}))}}))}));